{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1030:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return n})),r.d(e,\"b\",(function(){return a}));r(50);var n={longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0},o=1609.34;function a(t,e){return\"square_m\"===t?Math.sqrt(e/Math.PI):\"radius_m\"===t?e:\"radius_km\"===t?1e3*e:\"radius_miles\"===t?e*o:\"square_km\"===t?1e3*Math.sqrt(e/Math.PI):\"square_miles\"===t?Math.sqrt(e/Math.PI)*o:null}},1994:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return u}));var n=r(1),o=r.n(n),a=r(1995),i=r.n(a);r(2206),r(2205);function u(t){return o.a.createElement(\"span\",{className:\"BootstrapSliderWrapper\"},o.a.createElement(i.a,t))}},2205:function(t,e,r){},2620:function(t,e,r){\"use strict\";r.d(e,\"b\",(function(){return p})),r.d(e,\"a\",(function(){return f})),r.d(e,\"c\",(function(){return b}));var n=r(2813),o=r(28),a=r(2621);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=.25,s={LAT_MIN:-90,LAT_MAX:90,LNG_MIN:-180,LNG_MAX:180};function l(t){var e=o.extent(t,(function(t){return t[1]})),r=o.extent(t,(function(t){return t[0]})),n=e[0]===e[1]?function(t){return[t[0]-c<s.LAT_MIN?s.LAT_MIN:t[0]-c,t[1]+c>s.LAT_MAX?s.LAT_MAX:t[1]+c]}(e):e,a=r[0]===r[1]?function(t){return[t[0]-c<s.LNG_MIN?s.LNG_MIN:t[0]-c,t[1]+c>s.LNG_MAX?s.LNG_MAX:t[1]+c]}(r):r;return[[a[0],n[0]],[a[1],n[1]]]}function p(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var o=l(e);return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(r,!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t,{},Object(n.a)({height:t.height,width:t.width,padding:r,bounds:o}))}catch(e){return console.error(\"Could not auto zoom\",e),t}}function f(t,e,r,n){var o,i,u=t,c=r;return u.js_tooltip&&(c=Object(a.a)(u.js_tooltip)),c&&(o=function(t){t.picked?e({content:c(t),x:t.x,y:t.y+30}):e(null)}),u.js_onclick_href?i=function(t){var e=Object(a.a)(u.js_onclick_href)(t);window.open(e)}:u.table_filter&&void 0!==n&&(i=function(t){return n(t.object[u.line_column])}),{onClick:i,onHover:o,pickable:Boolean(o)}}var y={p1:.01,p5:.05,p95:.95,p99:.99};function b(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"sum\",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return\"count\"===e?function(t){return t.length}:(t=e in y?function(t,n){var a;return a=r?t.sort((function(t,e){return o.ascending(r(t),r(e))})):t.sort(o.ascending),o.quantile(a,y[e],n)}:o[e],r?function(e){return t(e.map(r))}:function(e){return t(e)})}},2621:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return f}));var n=r(2650),o=r.n(n),a=r(2651),i=r.n(a),u=r(28),c=r(2622);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={console:console,_:i.a,colors:c,d3array:u};function f(t,e,r){var n={},a=\"SAFE_EVAL_\"+Math.floor(1e6*Math.random());n[a]={};var i=a+\"=\"+t,u=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(r,!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},p,{},e);Object.keys(u).forEach((function(t){n[t]=u[t]}));try{return o.a.runInNewContext(i,n,r),n[a]}catch(t){return function(){return t}}}},2622:function(t,e,r){\"use strict\";r.r(e),r.d(e,\"hexToRGB\",(function(){return o}));var n=r(109);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!t)return[0,0,0,e];var r=Object(n.g)(t);return[r.r,r.g,r.b,e]}},2628:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return j}));var n=r(242),o=r.n(n),a=r(1),i=r.n(a),u=r(0),c=r.n(u),s=r(2645),l=r(2629);r(2646),r(2635);function p(t){return(p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(r,!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=2e3,w={viewport:c.a.object.isRequired,layers:c.a.array.isRequired,setControlValue:c.a.func,mapStyle:c.a.string,mapboxApiAccessToken:c.a.string.isRequired,onViewportChange:c.a.func},j=function(t){function e(t){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),n=this,(r=!(o=m(e).call(this,t))||\"object\"!==p(o)&&\"function\"!=typeof o?v(n):o).tick=r.tick.bind(v(r)),r.onViewportChange=r.onViewportChange.bind(v(r)),r.state={previousViewport:t.viewport,timer:setInterval(r.tick,O)},r}var r,n,a;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,t),r=e,a=[{key:\"getDerivedStateFromProps\",value:function(t,e){return t.viewport!==e.viewport?{viewport:b({},t.viewport),previousViewport:e.viewport}:null}}],(n=[{key:\"componentWillUnmount\",value:function(){clearInterval(this.state.timer)}},{key:\"onViewportChange\",value:function(t){var e=Object.assign({},t),r=b({},this.state.previousViewport,{},e);this.props.onViewportChange(r)}},{key:\"tick\",value:function(){var t=this;if(this.state&&!o()(this.state.previousViewport,this.props.viewport)){var e=this.props.setControlValue,r=this.props.viewport;e&&e(\"viewport\",r),this.setState((function(){return{previousViewport:t.props.viewport}}))}}},{key:\"layers\",value:function(){return this.props.layers.some((function(t){return\"function\"==typeof t}))?this.props.layers.map((function(t){return\"function\"==typeof t?t():t})):this.props.layers}},{key:\"render\",value:function(){var t=this.props.viewport;return i.a.createElement(s.b,f({},t,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),i.a.createElement(l.i,f({},t,{layers:this.layers(),initWebGLParameters:!0})))}}])&&h(r.prototype,n),a&&h(r,a),e}(i.a.Component);j.propTypes=w,j.defaultProps={mapStyle:\"light\",onViewportChange:function(){},setControlValue:function(){}}},2633:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return y}));var n=r(1),o=r.n(n),a=r(0),i=r.n(a);function u(t){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return!e||\"object\"!==u(e)&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f={label:i.a.string.isRequired,value:i.a.string.isRequired},y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),s(this,l(e).apply(this,arguments))}var r,n,a;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),r=e,(n=[{key:\"render\",value:function(){return o.a.createElement(\"div\",null,this.props.label,o.a.createElement(\"strong\",null,this.props.value))}}])&&c(r.prototype,n),a&&c(r,a),e}(o.a.PureComponent);y.propTypes=f},2635:function(t,e,r){},2636:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return c}));var n=r(8),o=r.n(n);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var i=[1,0,1,0,0,0,0];function u(t,e){var r=parseInt(o()(e).format(\"x\"),10);return parseInt(o()(e).add(t).format(\"x\"),10)-r}var c=function(t,e){var r,n,c=o()(Math.min.apply(Math,a(t))),s=o()(Math.max.apply(Math,a(t)));if(-1!==e.indexOf(\"/\")){var l=e.split(\"/\",2);l[0].endsWith(\"Z\")?(n=o()(l[0]),r=o.a.duration(l[1])):(n=o()(l[1]),r=o.a.duration(l[0]))}else n=function(t,e){var r=o()(t).subtract(e),n=t.toArray(),a=r.toArray(),u=n.map((function(t,e){return a[e]!==t})).indexOf(!0),c=n.map((function(t,e){if(e===u){var r=t-a[e];return t-(t-i[e])%r}return e<u||-1===u?t:i[e]}));return o()(c)}(c,r=o.a.duration(e));for(var p=o()(n);p<c;)p.add(r);for(;p>c;)p.subtract(r);for(var f=o()(n);f>s;)f.subtract(r);for(;f<s;)f.add(r);var y=null!=e?[p,o()(p).add(r)]:[p,f],b=t.every((function(t){return null===t}));return{start:parseInt(p.format(\"x\"),10),end:parseInt(f.format(\"x\"),10),getStep:u.bind(this,r),values:y.map((function(t){return parseInt(t.format(\"x\"),10)})),disabled:b}}},2637:function(t,e,r){\"use strict\";var n=r(1),o=r.n(n),a=r(0),i=r.n(a),u=r(2628),c=r(1094),s=r.n(c),l=r(25),p=r(1994);r(2639);function f(t){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m={start:i.a.number.isRequired,step:i.a.number.isRequired,end:i.a.number.isRequired,values:i.a.array.isRequired,onChange:i.a.func,loopDuration:i.a.number,maxFrames:i.a.number,orientation:i.a.oneOf([\"horizontal\",\"vertical\"]),reversed:i.a.bool,disabled:i.a.bool,range:i.a.bool},v=function(t){function e(t){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),n=this,(r=!(o=b(e).call(this,t))||\"object\"!==f(o)&&\"function\"!=typeof o?d(n):o).state={intervalId:null};var a=t.end-t.start,i=Math.min(t.maxFrames,a/t.step),u=a/i;return r.intervalMilliseconds=t.loopDuration/i,r.increment=u<t.step?t.step:u-u%t.step,r.onChange=r.onChange.bind(d(r)),r.play=r.play.bind(d(r)),r.pause=r.pause.bind(d(r)),r.stepBackward=r.stepBackward.bind(d(r)),r.stepForward=r.stepForward.bind(d(r)),r.getPlayClass=r.getPlayClass.bind(d(r)),r.formatter=r.formatter.bind(d(r)),r}var r,n,a;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),r=e,(n=[{key:\"componentDidMount\",value:function(){s.a.bind([\"space\"],this.play)}},{key:\"componentWillUnmount\",value:function(){s.a.unbind([\"space\"])}},{key:\"onChange\",value:function(t){this.props.onChange(t.target.value),null!=this.state.intervalId&&this.pause()}},{key:\"getPlayClass\",value:function(){return null==this.state.intervalId?\"fa fa-play fa-lg slider-button\":\"fa fa-pause fa-lg slider-button\"}},{key:\"play\",value:function(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{var t=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:t})}}},{key:\"pause\",value:function(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}},{key:\"stepForward\",value:function(){var t=this,e=this.props,r=e.start,n=e.end,o=e.step,a=e.values;if(!e.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map((function(e){return e+t.increment})),u=i[1]>n?i[0]-r:0;this.props.onChange(i.map((function(t){return t-u})))}}},{key:\"stepBackward\",value:function(){var t=this,e=this.props,r=e.start,n=e.end,o=e.step,a=e.values;if(!e.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map((function(e){return e-t.increment})),u=i[0]<r?n-i[1]:0;this.props.onChange(i.map((function(t){return t+u})))}}},{key:\"formatter\",value:function(t){if(this.props.disabled)return Object(l.b)(\"Data has no time steps\");var e=t;return Array.isArray(t)?t[0]===t[1]&&(e=[t[0]]):e=[t],e.map((function(t){return new Date(t).toUTCString()})).join(\" : \")}},{key:\"render\",value:function(){var t=this.props,e=t.start,r=t.end,n=t.step,a=t.orientation,i=t.reversed,u=t.disabled,c=t.range,s=t.values;return o.a.createElement(\"div\",{className:\"play-slider\"},o.a.createElement(\"div\",{className:\"play-slider-controls padded\"},o.a.createElement(\"i\",{className:\"fa fa-step-backward fa-lg slider-button \",onClick:this.stepBackward}),o.a.createElement(\"i\",{className:this.getPlayClass(),onClick:this.play}),o.a.createElement(\"i\",{className:\"fa fa-step-forward fa-lg slider-button \",onClick:this.stepForward})),o.a.createElement(\"div\",{className:\"play-slider-scrobbler padded\"},o.a.createElement(p.a,{value:c?s:s[0],range:c,formatter:this.formatter,change:this.onChange,min:e,max:r,step:n,orientation:a,reversed:i,disabled:u?\"disabled\":\"enabled\"})))}}])&&y(r.prototype,n),a&&y(r,a),e}(o.a.PureComponent);function g(t){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(r,!0).forEach((function(e){j(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}v.propTypes=m,v.defaultProps={onChange:function(){},loopDuration:15e3,maxFrames:100,orientation:\"horizontal\",reversed:!1,disabled:!1,range:!0},r.d(e,\"a\",(function(){return E}));var k={getLayers:i.a.func.isRequired,start:i.a.number.isRequired,end:i.a.number.isRequired,getStep:i.a.func,values:i.a.array.isRequired,aggregation:i.a.bool,disabled:i.a.bool,viewport:i.a.object.isRequired,children:i.a.node,mapStyle:i.a.string,mapboxApiAccessToken:i.a.string.isRequired,setControlValue:i.a.func,onViewportChange:i.a.func,onValuesChange:i.a.func},E=function(t){function e(t){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),n=this,(r=!(o=P(e).call(this,t))||\"object\"!==g(o)&&\"function\"!=typeof o?C(n):o).onViewportChange=r.onViewportChange.bind(C(r)),r}var r,n,a;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,t),r=e,(n=[{key:\"onViewportChange\",value:function(t){var e=this.props.disabled?w({},t):w({},t,{height:t.height+20});this.props.onViewportChange(e)}},{key:\"render\",value:function(){var t=this.props,e=t.start,r=t.end,n=t.getStep,a=t.disabled,i=t.aggregation,c=t.children,s=t.getLayers,l=t.values,p=t.onValuesChange,f=t.viewport,y=t.setControlValue,b=t.mapStyle,d=t.mapboxApiAccessToken,h=s(l),m=w({},f,{height:a?f.height:f.height-20});return o.a.createElement(\"div\",null,o.a.createElement(u.a,{viewport:m,layers:h,setControlValue:y,mapStyle:b,mapboxApiAccessToken:d,onViewportChange:this.onViewportChange}),!a&&o.a.createElement(v,{start:e,end:r,step:n(e),values:l,range:!i,onChange:p}),c)}}])&&_(r.prototype,n),a&&_(r,a),e}(o.a.Component);E.propTypes=k,E.defaultProps={aggregation:!1,disabled:!1,mapStyle:\"light\",setControlValue:function(){},onViewportChange:function(){},onValuesChange:function(){}}},2639:function(t,e,r){},2640:function(t,e,r){\"use strict\";var n=r(242),o=r.n(n),a=r(1),i=r.n(a),u=r(0),c=r.n(u),s=r(2628),l=r(168),p=r(2637),f=r(2641),y=r(2622),b=r(2636),d=r(2621),h=r(2620);function m(t){return(m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(r,!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=l.CategoricalColorNamespace.getScale;var k={formData:c.a.object.isRequired,mapboxApiKey:c.a.string.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,getLayer:c.a.func.isRequired,getPoints:c.a.func.isRequired,payload:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func},E=function(t){function e(t){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),n=this,(r=!(o=_(e).call(this,t))||\"object\"!==m(o)&&\"function\"!=typeof o?P(n):o).state=r.getStateFromProps(t),r.getLayers=r.getLayers.bind(P(r)),r.onValuesChange=r.onValuesChange.bind(P(r)),r.onViewportChange=r.onViewportChange.bind(P(r)),r.toggleCategory=r.toggleCategory.bind(P(r)),r.showSingleCategory=r.showSingleCategory.bind(P(r)),r}var r,n,o;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,t),r=e,(n=[{key:\"componentWillReceiveProps\",value:function(t){t.payload.form_data!==this.state.formData&&this.setState(O({},this.getStateFromProps(t)))}},{key:\"onValuesChange\",value:function(t){this.setState({values:Array.isArray(t)?t:[t,t+this.state.getStep(t)]})}},{key:\"onViewportChange\",value:function(t){this.setState({viewport:t})}},{key:\"getStateFromProps\",value:function(t,e){var r=t.payload.data.features||[],n=r.map((function(t){return t.__timestamp})),o=function(t,e){var r=t.color_picker||{r:0,g:0,b:0,a:1},n=[r.r,r.g,r.b,255*r.a],o=S(t.color_scheme),a={};return e.forEach((function(e){var i;null==e.cat_color||a.hasOwnProperty(e.cat_color)||(i=t.dimension?Object(y.hexToRGB)(o(e.cat_color),255*r.a):n,a[e.cat_color]={color:i,enabled:!0})})),a}(t.formData,r);if(e&&t.payload.form_data===e.formData)return O({},e,{categories:o});var a=t.payload.form_data.time_grain_sqla||t.payload.form_data.granularity||\"P1D\",i=Object(b.a)(n,a);return{start:i.start,end:i.end,getStep:i.getStep,values:i.values,disabled:i.disabled,viewport:t.formData.autozoom?Object(h.b)(t.viewport,t.getPoints(r)):t.viewport,selected:[],lastClick:0,formData:t.payload.form_data,categories:o}}},{key:\"getLayers\",value:function(t){var e=this.props,r=e.getLayer,n=e.payload,o=e.formData,a=e.onAddFilter,i=e.setTooltip,u=n.data.features?v(n.data.features):[];u=this.addColor(u,o),o.js_data_mutator&&(u=Object(d.a)(o.js_data_mutator)(u)),u=t[0]===t[1]||t[1]===this.end?u.filter((function(e){return e.__timestamp>=t[0]&&e.__timestamp<=t[1]})):u.filter((function(e){return e.__timestamp>=t[0]&&e.__timestamp<t[1]}));var c=this.state.categories;return o.dimension&&(u=u.filter((function(t){return c[t.cat_color]&&c[t.cat_color].enabled}))),[r(o,O({},n,{data:O({},n.data,{features:u})}),a,i)]}},{key:\"addColor\",value:function(t,e){var r=e.color_picker||{r:0,g:0,b:0,a:1},n=S(e.color_scheme);return t.map((function(t){return e.dimension?O({},t,{color:Object(y.hexToRGB)(n(t.cat_color),255*r.a)}):t}))}},{key:\"toggleCategory\",value:function(t){var e=this.state.categories[t],r=O({},this.state.categories,w({},t,O({},e,{enabled:!e.enabled})));Object.values(r).every((function(t){return!t.enabled}))&&Object.values(r).forEach((function(t){t.enabled=!0})),this.setState({categories:r})}},{key:\"showSingleCategory\",value:function(t){var e=O({},this.state.categories);Object.values(e).forEach((function(t){t.enabled=!1})),e[t].enabled=!0,this.setState({categories:e})}},{key:\"render\",value:function(){return i.a.createElement(\"div\",{style:{position:\"relative\"}},i.a.createElement(p.a,{getLayers:this.getLayers,start:this.state.start,end:this.state.end,getStep:this.state.getStep,values:this.state.values,onValuesChange:this.onValuesChange,disabled:this.state.disabled,viewport:this.state.viewport,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiKey,mapStyle:this.props.formData.mapbox_style,setControlValue:this.props.setControlValue},i.a.createElement(f.a,{categories:this.state.categories,toggleCategory:this.toggleCategory,showSingleCategory:this.showSingleCategory,position:this.props.formData.legend_position,format:this.props.formData.legend_format})))}}])&&j(r.prototype,n),o&&j(r,o),e}(i.a.PureComponent);function A(t){return(A=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(r,!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}E.propTypes=k,r.d(e,\"b\",(function(){return N})),r.d(e,\"a\",(function(){return F}));var L={formData:c.a.object.isRequired,payload:c.a.object.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func},I={onAddFilter:function(){},setTooltip:function(){}};function N(t,e){var r=function(r){function n(t){var r,o,a;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),o=this,r=!(a=R(n).call(this,t))||\"object\"!==A(a)&&\"function\"!=typeof a?q(o):a;var i=t.viewport,u=t.formData.autozoom?Object(h.b)(i,e(t.payload.data.features)):i;return r.state={viewport:u,layer:r.computeLayer(t)},r.onViewportChange=r.onViewportChange.bind(q(r)),r}var a,u,c;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(n,r),a=n,(u=[{key:\"componentWillReceiveProps\",value:function(t){var e=V({},t.formData,{viewport:null}),r=V({},this.props.formData,{viewport:null});o()(e,r)&&t.payload===this.props.payload||this.setState({layer:this.computeLayer(t)})}},{key:\"onViewportChange\",value:function(t){this.setState({viewport:t})}},{key:\"computeLayer\",value:function(e){var r=e.formData,n=e.payload,o=e.onAddFilter,a=e.setTooltip;return t(r,n,o,a)}},{key:\"render\",value:function(){var t=this.props,e=t.formData,r=t.payload,n=t.setControlValue,o=this.state,a=o.layer,u=o.viewport;return i.a.createElement(s.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:u,layers:[a],mapStyle:e.mapbox_style,setControlValue:n,onViewportChange:this.onViewportChange})}}])&&T(a.prototype,u),c&&T(a,c),n}(i.a.PureComponent);return r.propTypes=L,r.defaultProps=I,r}function F(t,e){function r(r){var n=r.formData,o=r.payload,a=r.setControlValue,u=r.onAddFilter,c=r.setTooltip,s=r.viewport;return i.a.createElement(E,{formData:n,mapboxApiKey:o.data.mapboxApiKey,setControlValue:a,viewport:s,getLayer:t,payload:o,onAddFilter:u,setTooltip:c,getPoints:e})}return r.propTypes=L,r.defaultProps=I,r}},2641:function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return h}));var n=r(1),o=r.n(n),a=r(0),i=r.n(a),u=r(578);r(2642);function c(t){return(c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return!e||\"object\"!==c(e)&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d={categories:i.a.object,toggleCategory:i.a.func,showSingleCategory:i.a.func,format:i.a.string,position:i.a.oneOf([null,\"tl\",\"tr\",\"bl\",\"br\"])},h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),f(this,y(e).apply(this,arguments))}var r,n,a;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,t),r=e,(n=[{key:\"format\",value:function(t){if(!this.props.format)return t;var e=parseFloat(t);return Object(u.b)(this.props.format,e)}},{key:\"formatCategoryLabel\",value:function(t){if(!this.props.format)return t;if(t.includes(\" - \")){var e=t.split(\" - \");return this.format(e[0])+\" - \"+this.format(e[1])}return this.format(t)}},{key:\"render\",value:function(){var t,e=this;if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;var r=Object.entries(this.props.categories).map((function(t){var r=l(t,2),n=r[0],a=r[1],i={color:\"rgba(\"+a.color.join(\", \")+\")\"},u=a.enabled?\"◼\":\"◻\";return o.a.createElement(\"li\",{key:n},o.a.createElement(\"a\",{href:\"#\",onClick:function(){return e.props.toggleCategory(n)},onDoubleClick:function(){return e.props.showSingleCategory(n)}},o.a.createElement(\"span\",{style:i},u),\" \",e.formatCategoryLabel(n)))})),n=\"t\"===this.props.position.charAt(0)?\"top\":\"bottom\",a=\"r\"===this.props.position.charAt(1)?\"right\":\"left\",i=(s(t={position:\"absolute\"},n,\"0px\"),s(t,a,\"10px\"),t);return o.a.createElement(\"div\",{className:\"legend\",style:i},o.a.createElement(\"ul\",{className:\"categories\"},r))}}])&&p(r.prototype,n),a&&p(r,a),e}(o.a.PureComponent);h.propTypes=d,h.defaultProps={categories:{},toggleCategory:function(){},showSingleCategory:function(){},format:null,position:\"tr\"}},2642:function(t,e,r){},2647:function(t,e){},2648:function(t,e){},2649:function(t,e){},2728:function(t,e,r){\"use strict\";r.r(e),r.d(e,\"getLayer\",(function(){return b}));var n=r(2629),o=r(1),a=r.n(o),i=r(25),u=r(2620),c=r(2640),s=r(2633),l=r(1030);function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e,r,o){var c=t,p=e.data.features.map((function(t){var e=Object(l.b)(c.point_unit,t.radius)||10;if(c.multiplier&&(e*=c.multiplier),t.color)return f({},t,{radius:e});var r=c.color_picker||{r:0,g:0,b:0,a:1};return f({},t,{radius:e,color:[r.r,r.g,r.b,255*r.a]})}));return new n.g(f({id:\"scatter-layer-\".concat(c.slice_id),data:p,fp64:!0,radiusMinPixels:c.min_radius||null,radiusMaxPixels:c.max_radius||null,outline:!1},Object(u.a)(c,o,function(t){return function(e){return a.a.createElement(\"div\",{className:\"deckgl-tooltip\"},a.a.createElement(s.a,{label:\"\".concat(Object(i.b)(\"Longitude and Latitude\"),\": \"),value:\"\".concat(e.object.position[0],\", \").concat(e.object.position[1])}),e.object.cat_color&&a.a.createElement(s.a,{label:\"\".concat(Object(i.b)(\"Category\"),\": \"),value:\"\".concat(e.object.cat_color)}),e.object.metric&&a.a.createElement(s.a,{label:\"\".concat(t.point_radius_fixed.value.label,\": \"),value:\"\".concat(e.object.metric)}))}}(c))))}e.default=Object(c.a)(b,(function(t){return t.map((function(t){return t.position}))}))},50:function(t,e,r){\"use strict\";r.d(e,\"b\",(function(){return n})),r.d(e,\"a\",(function(){return o})),r.d(e,\"c\",(function(){return a})),r.d(e,\"d\",(function(){return i})),r.d(e,\"e\",(function(){return u})),r.d(e,\"f\",(function(){return c}));r(49);function n(t,e){for(var r=[],n=t;n<=e;n++)r.push([n,n.toString()]);return r}function o(t){return t.map((function(t){return[t,t.toString()]}))}function a(t,e){return\"\".concat(t,\"__\").concat(e)}function i(t){var e=t.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\"),r=new RegExp(\"[\\\\?&]\"+e+\"=([^&#]*)\").exec(location.search);return null===r?\"\":decodeURIComponent(r[1].replace(/\\+/g,\" \"))}function u(t){var e;return t&&t.length>0&&(t.forEach((function(t){\"count\"===t.metric_name&&(e=\"count\")})),e||(e=t[0].metric_name)),e}function c(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)}}}]);","extractedComments":[]}